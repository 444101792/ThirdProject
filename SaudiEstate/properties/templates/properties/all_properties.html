{% extends 'base.html' %}

{% block title %}All Properties{% endblock %}

{% block content %}

<div
    style="padding-top: 140px; padding-bottom: 60px; max-width: 1200px; margin: 0 auto; padding-left: 20px; padding-right: 20px;">

    <div style="text-align: center; margin-bottom: 50px;">
        <h2 style="font-size: 2.5rem; color: #0d3c3c; margin-bottom: 10px;">Browse All Properties</h2>
        <p style="color: #666; font-size: 1.1rem;">Explore our complete list of verified listings</p>


    </div>


    <form method="GET" class="filter-bar">

        <select name="sort">
            <option value="">Sort By</option>
            <option value="price_low">Price: Low → High</option>
            <option value="price_high">Price: High → Low</option>
            <option value="newest">Newest</option>
            <option value="oldest">Oldest</option>
        </select>

        <select name="type">
            <option value="">Type</option>
            <option value="villa">Villa</option>
            <option value="apartment">Apartment</option>
            <option value="land">Land</option>
        </select>

        <select name="purpose">
            <option value="">Purpose</option>
            <option value="sale">For Sale</option>
            <option value="rent">For Rent</option>
        </select>

        {% if user.is_authenticated %}
        <label class="fav-check">
            <input type="checkbox" name="favorites" value="1">
            Show Favorites Only
        </label>
        {% endif %}

       <select name="city">
            <option value="">All Cities</option>
            {% for value, label in cities %}
            <option value="{{ value }}" {% if request.GET.city == value %}selected{% endif %}>
                {{ label }}
            </option>
            {% endfor %}
        </select>

        <button type="submit" class="btn-filter">Apply</button>

    </form>


    <div class="properties-grid">
        {% for property in properties %}
        {% include 'properties/card.html' %}
        {% empty %}
        <div style="grid-column: 1/-1; text-align: center; padding: 50px;">
            <h3 style="color: #888;">No properties found at the moment.</h3>
        </div>
        {% endfor %}
    </div>

</div>

{% endblock %}